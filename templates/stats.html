{% extends "base.html" %}
{% block content %}
<h1>Your Watchlist Statistics</h1>

<div class="row mt-4">
    <!-- Totals -->
    <div class="col-md-6">
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Totals</h5>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item bg-transparent text-white">Movies Watched: <span class="badge bg-primary float-end">{{ stats.total_movies }}</span></li>
                    <li class="list-group-item bg-transparent text-white">Series Watched: <span class="badge bg-primary float-end">{{ stats.total_series }}</span></li>
                    <li class="list-group-item bg-transparent text-white">Total Items Watched: <span class="badge bg-success float-end">{{ stats.total_items }}</span></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Averages -->
    <div class="col-md-6">
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Average Ratings</h5>
                 <ul class="list-group list-group-flush">
                    <li class="list-group-item bg-transparent text-white">
                        Average Movie Rating:
                        <span class="float-end rating-stars">
                        {% for i in range(1, 6) %}
                            <i class="bi {{ 'bi-star-fill' if i <= stats.avg_movie_rating|round|int else 'bi-star' }}"></i>
                        {% endfor %}
                        ({{ "%.2f"|format(stats.avg_movie_rating) }})
                        </span>
                    </li>
                    <li class="list-group-item bg-transparent text-white">
                        Average Series Rating:
                        <span class="float-end rating-stars">
                        {% for i in range(1, 6) %}
                            <i class="bi {{ 'bi-star-fill' if i <= stats.avg_series_rating|round|int else 'bi-star' }}"></i>
                        {% endfor %}
                        ({{ "%.2f"|format(stats.avg_series_rating) }})
                        </span>
                    </li>
                    <li class="list-group-item bg-transparent text-white">
                        Overall Average Rating:
                        <span class="float-end rating-stars">
                        {% for i in range(1, 6) %}
                            <i class="bi {{ 'bi-star-fill' if i <= stats.avg_overall_rating|round|int else 'bi-star' }}"></i>
                        {% endfor %}
                        ({{ "%.2f"|format(stats.avg_overall_rating) }})
                        </span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <!-- Favorite Genres -->
    <div class="col-md-12">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Your Favorite Genres</h5>
                <ol class="list-group list-group-numbered list-group-flush">
                    {% for genre, count in stats.genre_counts.items()[:10] %}
                         <li class="list-group-item bg-transparent text-white d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto">
                                <div class="fw-bold">{{ genre }}</div>
                            </div>
                            <span class="badge bg-primary rounded-pill">{{ count }}</span>
                        </li>
                    {% else %}
                        <p>Watch some items to see your favorite genres!</p>
                    {% endfor %}
                </ol>
            </div>
        </div>
    </div>
</div>
{% endblock %}
